{"code":"import { parseNFT, } from './utils';\r\nimport URI from './specs/uri';\r\nexport const specs = Object.freeze({\r\n    erc721: ERC721,\r\n    erc1155: ERC1155,\r\n});\r\nexport async function parseAvatarString(avatarURI) {\r\n    // test case-insensitive in case of uppercase records\r\n    if (!/eip155:/i.test(avatarURI)) {\r\n        const uriSpec = new URI();\r\n        const metadata = await uriSpec.getMetadata(avatarURI);\r\n        return { uri: ens, ...metadata };\r\n    }\r\n    // parse retrieved avatar uri\r\n    const { chainID, namespace, contractAddress, tokenID } = parseNFT(avatarURI);\r\n    // detect avatar spec by namespace\r\n    const Spec = specs[namespace];\r\n    if (!Spec)\r\n        throw new UnsupportedNamespace(`Unsupported namespace: ${namespace}`);\r\n    const spec = new Spec();\r\n    // add meta information of the avatar record\r\n    const host_meta = {\r\n        chain_id: chainID,\r\n        namespace,\r\n        contract_address: contractAddress,\r\n        token_id: tokenID,\r\n        reference_url: `https://opensea.io/assets/${contractAddress}/${tokenID}`,\r\n    };\r\n    // retrieve metadata\r\n    const metadata = await spec.getMetadata(resolvedAddress, contractAddress, tokenID);\r\n    return { uri: ens, host_meta, ...metadata };\r\n}\r\n//# sourceMappingURL=parseAvatarString.js.map","references":["/Users/kames/workspace/soulcialites/web3-citizen/node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.d.ts","/Users/kames/workspace/soulcialites/web3-citizen/packages/ens-wagmi/src/utils/utils.ts","/Users/kames/workspace/soulcialites/web3-citizen/packages/ens-wagmi/src/utils/specs/uri.ts"],"map":"{\"version\":3,\"file\":\"parseAvatarString.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../src/utils/parseAvatarString.ts\"],\"names\":[],\"mappings\":\"AAEA,OAAO,EACL,QAAQ,GACT,MAAM,SAAS,CAAC;AACjB,OAAO,GAAG,MAAM,aAAa,CAAC;AAU9B,MAAM,CAAC,MAAM,KAAK,GAAsC,MAAM,CAAC,MAAM,CAAC;IACpE,MAAM,EAAE,MAAM;IACd,OAAO,EAAE,OAAO;CACjB,CAAC,CAAC;AAEH,MAAM,CAAC,KAAK,UAAU,iBAAiB,CAAC,SAAiB;IAErD,qDAAqD;IACrD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;QAC/B,MAAM,OAAO,GAAG,IAAI,GAAG,EAAE,CAAC;QAC1B,MAAM,QAAQ,GAAG,MAAM,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACtD,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,QAAQ,EAAE,CAAC;KAClC;IAED,6BAA6B;IAC7B,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,QAAQ,CAC/D,SAAS,CACV,CAAC;IACF,kCAAkC;IAClC,MAAM,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC;IAC9B,IAAI,CAAC,IAAI;QACP,MAAM,IAAI,oBAAoB,CAAC,0BAA0B,SAAS,EAAE,CAAC,CAAC;IACxE,MAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC;IAExB,4CAA4C;IAC5C,MAAM,SAAS,GAAG;QAChB,QAAQ,EAAE,OAAO;QACjB,SAAS;QACT,gBAAgB,EAAE,eAAe;QACjC,QAAQ,EAAE,OAAO;QACjB,aAAa,EAAE,6BAA6B,eAAe,IAAI,OAAO,EAAE;KACzE,CAAC;IAEF,oBAAoB;IACpB,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,WAAW,CACrC,eAAe,EACf,eAAe,EACf,OAAO,CACR,CAAC;IACF,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,QAAQ,EAAE,CAAC;AAC9C,CAAC\"}"}
